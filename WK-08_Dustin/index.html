<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Fly to a location based on scroll position</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js"></script>
  <style>
  body { margin: 0; padding: 0; }
  #map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
  <style>
  #map {
    position: fixed;
    width: 50%;
  }
  #features {
    width: 50%;
    margin-left: 50%;
    font-family: sans-serif;
    overflow-y: scroll;
    background-color: #fafafa;
  }
  section {
    padding: 25px 50px;
    line-height: 25px;
    border-bottom: 1px solid #ddd;
    opacity: 0.25;
    font-size: 13px;
  }
  section.active {
    opacity: 1;
  }
  section:last-child {
    border-bottom: none;
    margin-bottom: 200px;
  }
  .marker {
    background-image: url('mapbox-icon.png');
    background-size: cover;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
  }
</style>

<div id="map"></div>
<div id="features">
  <section id="bwm" class="active">
    <h3>Brush Wellman Mines</h3>
    <p>
      The Beryllium Powder that comprises the primary material for the
      panels and body of the JWST is mined at the Brush Wellman Inc mine
      located in the Topaz-Spor Mountains of Utah.
      </thead>
    </p>
  </section>
  <section id="bwi">
    <h3>Brush Wellman Inc</h3>
    <p>
      The Beryllium Powder is then shipped to Brush Wellman Inc in Elmore,
      Ohio, where it is then sifted and purified into an extremely uniform
      optical mirror blank.
    </p>
  </section>
  <section id="axsys">
    <h3>Axsys Technologies</h3>
    <p>
      To Axsys Technologies in Cullman, Alabama, where the back of each “blank” is made into
      a honeycomb structure to lighten it, and they also provide general shaping of the front
      of the mirror.
    </p>
  </section>
  <section id="coherent">
    <h3>Coherent Inc (Formerly Tinsley Labs)</h3>
    <p>
      To L3 Communications, Coherent Inc in Richmond, California, where segments are
      ground and polished to a smooth and exact shape, then tested at room temperature.
    </p>
  </section>
  <section id="ball">
    <h3>Ball Aerospace & Technology</h3>
    <p>
      To Ball Aerospace & Technologies Corp. in Boulder, Colorado, where mounts and actuators
      are attached to the mirror segments, and vibration and optical testing are done.
    </p>
  </section>
  <section id="nts">
    <h3>XRCF</h3>
    <p>
      To the X-ray and Cryogenic Facility (XRCF) in Huntsville, Alabama, where
      Ball conducts cold (cryogenic) vacuum optical testing of segments in order to generate
      a map of cold distortions provided as a map to Tinsley Labs.
    </p>
  </section>
  <section id="ball2">
    <h3>Ball Aerospace & Technology</h3>
    <p>
      Back to Ball Aerospace & Technologies Corp., Boulder, Colorado, to remove
      mount and actuators.
    </p>
  </section>
  <section id="coherent2">
    <h3>Coherent Inc (Formerly Tinsley Labs)</h3>
    <p>
      Back to L3 Communications, Coherent Inc at Richmond, California.
      Where each mirror is fine-tuned by polishing in the opposite of the surface error values
      derived from the XRCF’s super-cold testing. Now, distortion that occurs in space-cold
      should actually perfect the mirror.
    </p>
    </section>
    <section id="ball3">
      <h3>Ball Aerospace & Technology</h3>
      <p>
        Back to Ball Aerospace & Technologies Corp., Boulder, Colorado, to clean
        mirror segments to prepare for coating.
        </thead>
      </p>
      </section>
      <section id="qci">
        <h3>Quantum Coating Inc</h3>
        <p>
          To Quantum Coating, Inc., Moorestown, New Jersey, where gold is evaporated
          over the segments in vacuum chamber and it forms a very thin coating on the
          smooth mirror surface.
        </p>
      </section>
      <section id="ball4">
        <h3>Ball Aerospace & Technology</h3>
        <p>
          Back to Ball Aerospace & Technologies Corp., Boulder, Colorado, to reassemble
          the mirror segments with mount and actuators. Final vibration testing is done.
        </p>
      </section>
      <section id="nts2">
        <h3>XRCF</h3>
        <p>
          Back to the XRCF in Huntsville, Alabama, where Ball performs final cryogenic
          acceptance testing on the segments.
        </p>
      </section>
      <section id="goddard">
        <h3>NASA Goddard Space Flight Center</h3>
        <p>
          To NASA Goddard Space Flight Center, Greenbelt, Maryland where personnel
          from the ITT Corporation, Rochester, New York, assemble the telescope and
          attaches it to the instrument module. Acoustic and vibration tests are performed.
        </p>
      </section>
      <section id="johnson">
        <h3>NASA Johnson Space Center</h3>
        <p>
          To NASA Johnson Space Center, Houston, Texas for final cryogenic testing
          of the whole telescope.
        </p>
      </section>
      <section id="ngc">
        <h3>Northrop Grumman Corporation</h3>
        <p>
          To Northrop Grumman, Redondo Beach, California for integration of the
          assembly with the spacecraft and sunshield.
        </p>
      </section>
      <section id="gsp">
        <h3>Guiana Space Centre</h3>
        <p>
          To the Guiana Space Centre, Kourou, French Guiana, for lift-off on an Ariane 5 rocket…
          and the beginning of the Webb telescope’s million-mile journey to its final destination in space!
        </p>
      </section>
      <section id="gsp">
        <h3>Finish</h3>
        <p>
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        </p>
      </section>
    <small id="citation">
      Adapted from
      <a href="http://www.gutenberg.org/files/2346/2346-h/2346-h.htm">Project Gutenberg</a>
    </small>
  </section>
</div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiZG1rbGluZ2VyMTIiLCJhIjoiY2t2NzZoMnQxMXI3cjJvbDBpaDZtcDRxMCJ9.MuV__FdHRC7aSMrd-GEJeg';
const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/satellite-streets-v10',
  center: [-112.5837339, 39.5114132],
  zoom: 13,
  bearing: 0,
  pitch: 30
});

const marker = new mapboxgl.Marker()
.setLngLat([-112.5837339, 39.5114132])
.addTo(map);

const marker1 = new mapboxgl.Marker()
.setLngLat([-81.5524275, 41.5664134])
.addTo(map);

const marker2 = new mapboxgl.Marker()
.setLngLat([-86.8861148, 34.2095237])
.addTo(map);

const marker3 = new mapboxgl.Marker()
.setLngLat([-122.3321716, 37.9868991])
.addTo(map);

const marker4 = new mapboxgl.Marker()
.setLngLat([-105.0997533, 39.9117581])
.addTo(map);

const marker5 = new mapboxgl.Marker()
.setLngLat([-86.7148069, 34.6924538])
.addTo(map);

const marker6 = new mapboxgl.Marker()
.setLngLat([-74.984786, 39.9778208])
.addTo(map);

const marker7 = new mapboxgl.Marker()
.setLngLat([-76.852344, 38.99495])
.addTo(map);

const marker8 = new mapboxgl.Marker()
.setLngLat([-95.089998, 29.5593451])
.addTo(map);

const marker9 = new mapboxgl.Marker()
.setLngLat([-118.3732839, 33.8919061])
.addTo(map);

const marker10 = new mapboxgl.Marker()
.setLngLat([-52.6832152, 5.1673328])
.addTo(map);

const chapters = {
  'bwm': {
    bearing: 0,
    center: [-112.5837339, 39.5114132],
    zoom: 13,
    pitch: 30
  },
  'bwi': {
    duration: 25000,
    center: [-81.5524275, 41.5664134],
    bearing: 0,
    zoom: 17,
    pitch: 30
  },
  'axsys': {
    duration: 25000,
    bearing: 0,
    center: [-86.8861148, 34.2095237],
    zoom: 16,
    pitch: 30
  },
  'coherent': {
    duration: 25000,
    bearing: 0,
    center: [-122.3321716, 37.9868991],
    zoom: 17,
    pitch: 30
  },
  'ball': {
    duration: 25000,
    bearing: 0,
    center: [-105.0997533, 39.9117581],
    zoom: 17,
    pitch: 30
  },
  'nts': {
    duration: 25000,
    bearing: 0,
    center: [-86.7148069, 34.6924538],
    zoom: 17,
    pitch: 30
  },
  'ball2': {
    duration: 25000,
    bearing: 0,
    center: [-105.0997533, 39.9117581],
    zoom: 17,
    pitch: 30
  },
  'coherent2': {
    duration: 25000,
    bearing: 0,
    center: [-122.3321716, 37.9868991],
    zoom: 17,
    pitch: 30
  },
  'ball3': {
    duration: 25000,
    bearing: 0,
    center: [-105.0997533, 39.9117581],
    zoom: 17,
    pitch: 30
  },
  'qci': {
    duration: 25000,
    bearing: 0,
    center: [-74.984786, 39.9778208],
    zoom: 17,
    pitch: 30
  },
  'ball4': {
    duration: 25000,
    bearing: 0,
    center: [-105.0997533, 39.9117581],
    zoom: 17,
    pitch: 30
  },
  'nts2': {
    duration: 25000,
    bearing: 0,
    center: [-86.7148069, 34.6924538],
    zoom: 17,
    pitch: 30
  },
  'goddard': {
    duration: 25000,
    bearing: 0,
    center: [-76.852344, 38.99495],
    zoom: 17,
    pitch: 30
  },
  'johnson': {
    duration: 25000,
    bearing: 0,
    center: [-95.089998, 29.5593451],
    zoom: 17,
    pitch: 30
  },
  'ngc': {
    duration: 25000,
    bearing: 0,
    center: [-118.3732839, 33.8919061],
    zoom: 17,
    pitch: 30
  },
  'gsp': {
    duration: 50000,
    bearing: 0,
    center: [-52.6832152, 5.1673328],
    zoom: 15,
    pitch: 30
  }
};

let activeChapterName = 'bwm';
function setActiveChapter(chapterName) {
  if (chapterName === activeChapterName) return;

  map.flyTo(chapters[chapterName]);

  document.getElementById(chapterName).classList.add('active');
  document.getElementById(activeChapterName).classList.remove('active');

  activeChapterName = chapterName;
}

function isElementOnScreen(id) {
  const element = document.getElementById(id);
  const bounds = element.getBoundingClientRect();
  return bounds.top < window.innerHeight && bounds.bottom > 0;
}

// On every scroll event, check which element is on screen
window.onscroll = () => {
  for (const chapterName in chapters) {
    if (isElementOnScreen(chapterName)) {
      setActiveChapter(chapterName);
      break;
    }
  }
};

// add markers to map
for (const feature of geojson.features) {
  // create a HTML element for each feature
  const el = document.createElement('div');
  el.className = 'marker';

  // make a marker for each feature and add to the map
  new mapboxgl.Marker(el).setLngLat(feature.geometry.coordinates).addTo(map);
}

</script>

</body>
</html>
